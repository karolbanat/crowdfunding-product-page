"use strict";var toggleBtn=document.querySelector(".toggle-button"),primaryNav=document.querySelector("#primary-nav"),bookmarkButton=document.querySelector(".bookmark-button"),totalAmountBacked=document.querySelector("#total-amount-backed"),totalBackers=document.querySelector("#total-backers"),progressBar=document.querySelector("#progress-bar"),pledgeButtons=document.querySelectorAll("button[data-reward]"),selectionModal=document.querySelector(".selection-modal"),closeSelectionModalButton=selectionModal.querySelector(".selection-modal__close-button"),selectionButtons=selectionModal.querySelectorAll('input[type="radio"][name="reward"]'),pledgeForms=selectionModal.querySelectorAll(".pledge-form"),successModal=document.querySelector(".success-modal"),successModalCloseButton=successModal.querySelector(".success-modal__confirmation-button"),TOTAL_AMOUNT=1e5,PROGRESS_DATA={amountBacked:89914,backers:5007},DATA_STATES={expanded:"data-expanded",bookmarked:"data-bookmarked",open:"data-open",selected:"data-selected"},handleToggleBtn=function(){toggleBtn.toggleAttribute(DATA_STATES.expanded);var e=toggleBtn.hasAttribute(DATA_STATES.expanded);primaryNav.toggleAttribute(DATA_STATES.expanded,e),toggleBtn.setAttribute("aria-expanded",e)},handleBookmarkButton=function(){bookmarkButton.toggleAttribute(DATA_STATES.bookmarked),saveBookmarkData()},saveBookmarkData=function(){var e=bookmarkButton.hasAttribute(DATA_STATES.bookmarked);localStorage.setItem("bookmarked",JSON.stringify(e))},loadBookmarkData=function(){var e=JSON.parse(localStorage.getItem("bookmarked"));bookmarkButton.toggleAttribute(DATA_STATES.bookmarked,e)},handlePledgeButton=function(e){openSelectionModal();e=e.target.dataset.reward;selectChosenPledge(e)},openSelectionModal=function(){selectionModal.setAttribute(DATA_STATES.open,!0),closeSelectionModalButton.focus(),document.body.classList.add("backdrop")},selectChosenPledge=function(e){e='input[name="reward"][data-reward="'.concat(e,'"'),e=selectionModal.querySelector(e);e&&(unselectAllCards(),e.checked=!0,selectParentCard(e))},closeSelectionModal=function(){selectionModal.removeAttribute(DATA_STATES.open),document.body.classList.remove("backdrop")},handlePledgeSelection=function(e){unselectAllCards(),selectParentCard(e.target)},unselectAllCards=function(){selectionButtons.forEach(function(e){return e.closest(".modal-pledge-card").removeAttribute(DATA_STATES.selected)})},selectParentCard=function(e){e=e.closest(".modal-pledge-card");e&&e.setAttribute(DATA_STATES.selected,!0)},handleFormSubmit=function(e){e.preventDefault();e=e.target.querySelector('input[type="number"]').value;updateProgressData(parseInt(e)),closeSelectionModal(),openSuccessModal()},updateProgressData=function(e){PROGRESS_DATA.amountBacked+=e,PROGRESS_DATA.backers+=1,saveProgressData(),updateProgressBar(),insertProgressData()},saveProgressData=function(){localStorage.setItem("progress",JSON.stringify(PROGRESS_DATA))},loadProgressData=function(){var e,t=JSON.parse(localStorage.getItem("progress"));t&&(e=t.amountBacked,t=t.backers,PROGRESS_DATA.amountBacked=e,PROGRESS_DATA.backers=t),insertProgressData()},insertProgressData=function(){totalAmountBacked.innerText=formatAmount(PROGRESS_DATA.amountBacked),totalBackers.innerText=PROGRESS_DATA.backers.toLocaleString("en-US"),updateProgressBar()},updateProgressBar=function(){var e=(PROGRESS_DATA.amountBacked/TOTAL_AMOUNT*100).toFixed(2);progressBar.style.setProperty("--progress","".concat(e,"%"))},formatAmount=function(e){return"$".concat(e.toLocaleString("en-US"))},openSuccessModal=function(){successModal.setAttribute(DATA_STATES.open,!0),successModalCloseButton.focus(),document.body.classList.add("backdrop")},closeSuccessModal=function(){successModal.removeAttribute(DATA_STATES.open),document.body.classList.remove("backdrop")};toggleBtn.addEventListener("click",handleToggleBtn),bookmarkButton.addEventListener("click",handleBookmarkButton),pledgeButtons.forEach(function(e){e.addEventListener("click",handlePledgeButton)}),closeSelectionModalButton.addEventListener("click",closeSelectionModal),selectionButtons.forEach(function(e){e.addEventListener("change",handlePledgeSelection)}),pledgeForms.forEach(function(e){e.addEventListener("submit",handleFormSubmit)}),successModalCloseButton.addEventListener("click",closeSuccessModal),loadBookmarkData(),loadProgressData(),insertProgressData();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJpbWFyeU5hdiIsImJvb2ttYXJrQnV0dG9uIiwidG90YWxCYWNrZXJzIiwicHJvZ3Jlc3NCYXIiLCJzZWxlY3Rpb25Nb2RhbCIsImNsb3NlU2VsZWN0aW9uTW9kYWxCdXR0b24iLCJzZWxlY3Rpb25CdXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsInN1Y2Nlc3NNb2RhbCIsInN1Y2Nlc3NNb2RhbENsb3NlQnV0dG9uIiwiVE9UQUxfQU1PVU5UIiwiUFJPR1JFU1NfREFUQSIsImFtb3VudEJhY2tlZCIsImJhY2tlcnMiLCJleHBhbmRlZCIsImJvb2ttYXJrZWQiLCJvcGVuIiwic2VsZWN0ZWQiLCJEQVRBX1NUQVRFUyIsImhhc0F0dHJpYnV0ZSIsInRvZ2dsZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInNhdmVCb29rbWFya0RhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiZ2V0SXRlbSIsImhhbmRsZVBsZWRnZUJ1dHRvbiIsImUiLCJvcGVuU2VsZWN0aW9uTW9kYWwiLCJsb2FkQm9va21hcmtEYXRhIiwiZGF0YXNldCIsInNlbGVjdENob3NlblBsZWRnZSIsImZvY3VzIiwiYWRkIiwicmV3YXJkIiwicXVlcnkiLCJjb25jYXQiLCJjbGFzc0xpc3QiLCJzZWxlY3RlZFBsZWRnZUlucHV0IiwiY2hlY2tlZCIsInNlbGVjdFBhcmVudENhcmQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJib2R5IiwicmVtb3ZlIiwidW5zZWxlY3RBbGxDYXJkcyIsInRhcmdldCIsImNsb3NlU2VsZWN0aW9uTW9kYWwiLCJlbGVtZW50IiwiaGFuZGxlUGxlZGdlU2VsZWN0aW9uIiwiaW5wdXRWYWx1ZSIsImNsb3Nlc3QiLCJ2YWx1ZSIsInVwZGF0ZVByb2dyZXNzRGF0YSIsInBhcnNlSW50Iiwib3BlblN1Y2Nlc3NNb2RhbCIsInNhdmVQcm9ncmVzc0RhdGEiLCJoYW5kbGVGb3JtU3VibWl0IiwidXBkYXRlUHJvZ3Jlc3NCYXIiLCJpbnNlcnRQcm9ncmVzc0RhdGEiLCJsb2FkUHJvZ3Jlc3NEYXRhIiwicHJvZ3Jlc3NEYXRhIiwidG90YWxBbW91bnRCYWNrZWQiLCJmb3JtYXRBbW91bnQiLCJpbm5lclRleHQiLCJ0b0xvY2FsZVN0cmluZyIsInRvRml4ZWQiLCJwcm9ncmVzcyIsImFtb3VudCIsImNsb3NlU3VjY2Vzc01vZGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUJvb2ttYXJrQnV0dG9uIiwicGxlZGdlQnV0dG9ucyIsImZvckVhY2giLCJidXR0b24iLCJwbGVkZ2VGb3JtcyIsImZvcm0iXSwibWFwcGluZ3MiOiJhQUNBLElBQU1BLFVBQVlDLFNBQVNDLGNBQWMsZ0JBQXZCLEVBRGxCQyxXQUFBRixTQUFBQyxjQUFBLGNBQUEsRUFJQUUsZUFBQUgsU0FBQUMsY0FBQSxrQkFBQSxFQUNNRSxrQkFBaUJILFNBQVNDLGNBQWMsc0JBQXZCRCxFQUN2QkksYUFBQUosU0FBQUMsY0FBQSxnQkFBQSxFQUdNSSxZQUFjTCxTQUFTQyxjQUFjLGVBQXZCLEVBRGRHLGNBQWVKLFNBQVNDLGlCQUFjLHFCQUF2QkQsRUFFckJNLGVBQUFOLFNBQUFDLGNBQUEsa0JBQUEsRUFJTU0sMEJBQTRCRCxlQUFlTCxjQUFjLGdDQUE3QixFQUZsQ08saUJBQUFGLGVBQUFHLGlCQUFBLG9DQUFBLEVBQ01ILFlBQWNBLGVBQVlMLGlCQUFjLGNBQTFCLEVBRXBCUyxhQUFBVixTQUFBQyxjQUFBLGdCQUFBLEVBTU1VLHdCQUEwQkQsYUFBYVQsY0FBYyxxQ0FBM0IsRUFKaENXLGFBQUEsSUFPTUMsY0FBZ0IsQ0FOdEJDLGFBQWlCLE1BQ2pCQyxRQUFBLElBS3NCLEVBSmhCTCxZQUFlVixDQUNyQmdCLFNBQU1MLGdCQUVOTSxXQUFNTCxrQkFDTk0sS0FBTUwsWUFRTE0sU0FQQUwsZUFMb0JkLEVBU3BCZ0IsZ0JBQVUsV0FRVmpCLFVBUEFr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XG5jb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlLWJ1dHRvbicpO1xyXG5jb25zdCBwcmltYXJ5TmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW1hcnktbmF2Jyk7XHJcblxyXG4vKiBib29rbWFyayAqL1xyXG5jb25zdCBib29rbWFya0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib29rbWFyay1idXR0b24nKTtcclxuLyogcHJvZ3Jlc3MgKi9cclxuY29uc3QgdG90YWxBbW91bnRCYWNrZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG90YWwtYW1vdW50LWJhY2tlZCcpO1xyXG5jb25zdCB0b3RhbEJhY2tlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG90YWwtYmFja2VycycpO1xyXG5jb25zdCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1iYXInKTtcclxuLyogcGxlZGdlIGJ1dHRvbnMgLSBidXR0b25zIGluIGFib3V0IHNlY3Rpb24gYW5kIGhlYWRlciAqL1xyXG5jb25zdCBwbGVkZ2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtcmV3YXJkXScpO1xyXG4vKiBzZWxlY3Rpb24gbW9kYWwgKi9cclxuY29uc3Qgc2VsZWN0aW9uTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0aW9uLW1vZGFsJyk7XHJcbmNvbnN0IGNsb3NlU2VsZWN0aW9uTW9kYWxCdXR0b24gPSBzZWxlY3Rpb25Nb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0aW9uLW1vZGFsX19jbG9zZS1idXR0b24nKTtcclxuLyogcGxlZGdlIHNlbGVjdCByYWRpbyBidXR0b25zICovXHJcbmNvbnN0IHNlbGVjdGlvbkJ1dHRvbnMgPSBzZWxlY3Rpb25Nb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cInJld2FyZFwiXScpO1xyXG4vKiBmb3JtcyAqL1xyXG5jb25zdCBwbGVkZ2VGb3JtcyA9IHNlbGVjdGlvbk1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGVkZ2UtZm9ybScpO1xyXG4vKiBzdWNjZXNzIG1vZGFsICovXHJcbmNvbnN0IHN1Y2Nlc3NNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzLW1vZGFsJyk7XHJcbmNvbnN0IHN1Y2Nlc3NNb2RhbENsb3NlQnV0dG9uID0gc3VjY2Vzc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzLW1vZGFsX19jb25maXJtYXRpb24tYnV0dG9uJyk7XHJcblxyXG5jb25zdCBUT1RBTF9BTU9VTlQgPSAxMDAwMDA7XHJcbmNvbnN0IFBST0dSRVNTX0RBVEEgPSB7XHJcblx0YW1vdW50QmFja2VkOiA4OTkxNCxcclxuXHRiYWNrZXJzOiA1MDA3LFxyXG59O1xyXG5jb25zdCBEQVRBX1NUQVRFUyA9IHtcclxuXHRleHBhbmRlZDogJ2RhdGEtZXhwYW5kZWQnLFxyXG5cdGJvb2ttYXJrZWQ6ICdkYXRhLWJvb2ttYXJrZWQnLFxyXG5cdG9wZW46ICdkYXRhLW9wZW4nLFxyXG5cdHNlbGVjdGVkOiAnZGF0YS1zZWxlY3RlZCcsXHJcbn07XHJcblxyXG4vKiB0b2dnbGUgbmF2IGJ1dHRvbiBoYW5kbGluZyAqL1xyXG5jb25zdCBoYW5kbGVUb2dnbGVCdG4gPSAoKSA9PiB7XHJcblx0dG9nZ2xlQnRuLnRvZ2dsZUF0dHJpYnV0ZShEQVRBX1NUQVRFUy5leHBhbmRlZCk7XHJcblx0Y29uc3QgZXhwYW5kZWQgPSB0b2dnbGVCdG4uaGFzQXR0cmlidXRlKERBVEFfU1RBVEVTLmV4cGFuZGVkKTtcclxuXHRwcmltYXJ5TmF2LnRvZ2dsZUF0dHJpYnV0ZShEQVRBX1NUQVRFUy5leHBhbmRlZCwgZXhwYW5kZWQpO1xyXG5cdHRvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBleHBhbmRlZCk7XHJcbn07XHJcblxyXG4vKiBib29rbWFyayBoYW5kbGluZyAqL1xyXG5jb25zdCBoYW5kbGVCb29rbWFya0J1dHRvbiA9ICgpID0+IHtcclxuXHRib29rbWFya0J1dHRvbi50b2dnbGVBdHRyaWJ1dGUoREFUQV9TVEFURVMuYm9va21hcmtlZCk7XHJcblx0c2F2ZUJvb2ttYXJrRGF0YSgpO1xyXG59O1xyXG5cclxuY29uc3Qgc2F2ZUJvb2ttYXJrRGF0YSA9ICgpID0+IHtcclxuXHRjb25zdCBib29rbWFya2VkID0gYm9va21hcmtCdXR0b24uaGFzQXR0cmlidXRlKERBVEFfU1RBVEVTLmJvb2ttYXJrZWQpO1xyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdib29rbWFya2VkJywgSlNPTi5zdHJpbmdpZnkoYm9va21hcmtlZCkpO1xyXG59O1xyXG5cclxuY29uc3QgbG9hZEJvb2ttYXJrRGF0YSA9ICgpID0+IHtcclxuXHRjb25zdCBib29rbWFya2VkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm9va21hcmtlZCcpKTtcclxuXHRib29rbWFya0J1dHRvbi50b2dnbGVBdHRyaWJ1dGUoREFUQV9TVEFURVMuYm9va21hcmtlZCwgYm9va21hcmtlZCk7XHJcbn07XHJcblxyXG4vKiBwbGVkZ2UgYnV0dG9uIGhhbmRsaW5nICovXHJcbmNvbnN0IGhhbmRsZVBsZWRnZUJ1dHRvbiA9IChlKSA9PiB7XHJcblx0b3BlblNlbGVjdGlvbk1vZGFsKCk7XHJcblx0Y29uc3QgcmV3YXJkID0gZS50YXJnZXQuZGF0YXNldC5yZXdhcmQ7XHJcblx0c2VsZWN0Q2hvc2VuUGxlZGdlKHJld2FyZCk7XHJcbn07XHJcblxyXG5jb25zdCBvcGVuU2VsZWN0aW9uTW9kYWwgPSAoKSA9PiB7XHJcblx0c2VsZWN0aW9uTW9kYWwuc2V0QXR0cmlidXRlKERBVEFfU1RBVEVTLm9wZW4sIHRydWUpO1xyXG5cdGNsb3NlU2VsZWN0aW9uTW9kYWxCdXR0b24uZm9jdXMoKTtcclxuXHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2JhY2tkcm9wJyk7XHJcbn07XHJcblxyXG5jb25zdCBzZWxlY3RDaG9zZW5QbGVkZ2UgPSAocmV3YXJkKSA9PiB7XHJcblx0LyogZmluZCBpbnB1dCB3aXRoIGNob3NlbiByZXdhcmQgKi9cclxuXHRjb25zdCBxdWVyeSA9IGBpbnB1dFtuYW1lPVwicmV3YXJkXCJdW2RhdGEtcmV3YXJkPVwiJHtyZXdhcmR9XCJgO1xyXG5cdGNvbnN0IHNlbGVjdGVkUGxlZGdlSW5wdXQgPSBzZWxlY3Rpb25Nb2RhbC5xdWVyeVNlbGVjdG9yKHF1ZXJ5KTtcclxuXHQvKiBpZiBmb3VuZCBzZWxlY3QgaXQgYW5kIHBhcmVudCBjYXJkICovXHJcblx0aWYgKHNlbGVjdGVkUGxlZGdlSW5wdXQpIHtcclxuXHRcdHVuc2VsZWN0QWxsQ2FyZHMoKTtcclxuXHRcdHNlbGVjdGVkUGxlZGdlSW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcblx0XHRzZWxlY3RQYXJlbnRDYXJkKHNlbGVjdGVkUGxlZGdlSW5wdXQpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNsb3NlU2VsZWN0aW9uTW9kYWwgPSAoKSA9PiB7XHJcblx0c2VsZWN0aW9uTW9kYWwucmVtb3ZlQXR0cmlidXRlKERBVEFfU1RBVEVTLm9wZW4pO1xyXG5cdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYmFja2Ryb3AnKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVBsZWRnZVNlbGVjdGlvbiA9IChlKSA9PiB7XHJcblx0dW5zZWxlY3RBbGxDYXJkcygpO1xyXG5cdHNlbGVjdFBhcmVudENhcmQoZS50YXJnZXQpO1xyXG59O1xyXG5cclxuY29uc3QgdW5zZWxlY3RBbGxDYXJkcyA9ICgpID0+IHtcclxuXHRzZWxlY3Rpb25CdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4gYnV0dG9uLmNsb3Nlc3QoJy5tb2RhbC1wbGVkZ2UtY2FyZCcpLnJlbW92ZUF0dHJpYnV0ZShEQVRBX1NUQVRFUy5zZWxlY3RlZCkpO1xyXG59O1xyXG5cclxuY29uc3Qgc2VsZWN0UGFyZW50Q2FyZCA9IChlbGVtZW50KSA9PiB7XHJcblx0Y29uc3QgcGFyZW50ID0gZWxlbWVudC5jbG9zZXN0KCcubW9kYWwtcGxlZGdlLWNhcmQnKTtcclxuXHRpZiAocGFyZW50KSBwYXJlbnQuc2V0QXR0cmlidXRlKERBVEFfU1RBVEVTLnNlbGVjdGVkLCB0cnVlKTtcclxufTtcclxuXHJcbi8qIGZvcm0gc3VibWl0c3Npb24gKi9cclxuY29uc3QgaGFuZGxlRm9ybVN1Ym1pdCA9IChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IGZvcm1JbnB1dCA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJudW1iZXJcIl0nKTtcclxuXHRjb25zdCBpbnB1dFZhbHVlID0gZm9ybUlucHV0LnZhbHVlO1xyXG5cdHVwZGF0ZVByb2dyZXNzRGF0YShwYXJzZUludChpbnB1dFZhbHVlKSk7XHJcblx0Y2xvc2VTZWxlY3Rpb25Nb2RhbCgpO1xyXG5cdG9wZW5TdWNjZXNzTW9kYWwoKTtcclxufTtcclxuXHJcbi8qIHByb2dyZXNzIGhhbmRsaW5nICovXHJcbmNvbnN0IHVwZGF0ZVByb2dyZXNzRGF0YSA9ICh2YWx1ZSkgPT4ge1xyXG5cdFBST0dSRVNTX0RBVEEuYW1vdW50QmFja2VkICs9IHZhbHVlO1xyXG5cdFBST0dSRVNTX0RBVEEuYmFja2VycyArPSAxO1xyXG5cdHNhdmVQcm9ncmVzc0RhdGEoKTtcclxuXHR1cGRhdGVQcm9ncmVzc0JhcigpO1xyXG5cdGluc2VydFByb2dyZXNzRGF0YSgpO1xyXG59O1xyXG5cclxuY29uc3Qgc2F2ZVByb2dyZXNzRGF0YSA9ICgpID0+IHtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvZ3Jlc3MnLCBKU09OLnN0cmluZ2lmeShQUk9HUkVTU19EQVRBKSk7XHJcbn07XHJcblxyXG5jb25zdCBsb2FkUHJvZ3Jlc3NEYXRhID0gKCkgPT4ge1xyXG5cdGNvbnN0IHByb2dyZXNzRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2dyZXNzJykpO1xyXG5cdGlmIChwcm9ncmVzc0RhdGEpIHtcclxuXHRcdGNvbnN0IHsgYW1vdW50QmFja2VkLCBiYWNrZXJzIH0gPSBwcm9ncmVzc0RhdGE7XHJcblx0XHRQUk9HUkVTU19EQVRBLmFtb3VudEJhY2tlZCA9IGFtb3VudEJhY2tlZDtcclxuXHRcdFBST0dSRVNTX0RBVEEuYmFja2VycyA9IGJhY2tlcnM7XHJcblx0fVxyXG5cdGluc2VydFByb2dyZXNzRGF0YSgpO1xyXG59O1xyXG5cclxuY29uc3QgaW5zZXJ0UHJvZ3Jlc3NEYXRhID0gKCkgPT4ge1xyXG5cdHRvdGFsQW1vdW50QmFja2VkLmlubmVyVGV4dCA9IGZvcm1hdEFtb3VudChQUk9HUkVTU19EQVRBLmFtb3VudEJhY2tlZCk7XHJcblx0dG90YWxCYWNrZXJzLmlubmVyVGV4dCA9IFBST0dSRVNTX0RBVEEuYmFja2Vycy50b0xvY2FsZVN0cmluZygnZW4tVVMnKTtcclxuXHR1cGRhdGVQcm9ncmVzc0JhcigpO1xyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlUHJvZ3Jlc3NCYXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgcHJvZ3Jlc3MgPSAoKFBST0dSRVNTX0RBVEEuYW1vdW50QmFja2VkIC8gVE9UQUxfQU1PVU5UKSAqIDEwMCkudG9GaXhlZCgyKTtcclxuXHRwcm9ncmVzc0Jhci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wcm9ncmVzcycsIGAke3Byb2dyZXNzfSVgKTtcclxufTtcclxuXHJcbmNvbnN0IGZvcm1hdEFtb3VudCA9IChhbW91bnQpID0+IHtcclxuXHRyZXR1cm4gYCQke2Ftb3VudC50b0xvY2FsZVN0cmluZygnZW4tVVMnKX1gO1xyXG59O1xyXG5cclxuLyogc3VjY2VzcyBtb2RhbCBoYW5kbGluZyAqL1xyXG5jb25zdCBvcGVuU3VjY2Vzc01vZGFsID0gKCkgPT4ge1xyXG5cdHN1Y2Nlc3NNb2RhbC5zZXRBdHRyaWJ1dGUoREFUQV9TVEFURVMub3BlbiwgdHJ1ZSk7XHJcblx0c3VjY2Vzc01vZGFsQ2xvc2VCdXR0b24uZm9jdXMoKTtcclxuXHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2JhY2tkcm9wJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZVN1Y2Nlc3NNb2RhbCA9ICgpID0+IHtcclxuXHRzdWNjZXNzTW9kYWwucmVtb3ZlQXR0cmlidXRlKERBVEFfU1RBVEVTLm9wZW4pO1xyXG5cdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYmFja2Ryb3AnKTtcclxufTtcclxuXHJcbi8qIGV2ZW50IGxpc3RlbmVycyAqL1xyXG50b2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVUb2dnbGVCdG4pO1xyXG5ib29rbWFya0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUJvb2ttYXJrQnV0dG9uKTtcclxucGxlZGdlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcclxuXHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQbGVkZ2VCdXR0b24pO1xyXG59KTtcclxuY2xvc2VTZWxlY3Rpb25Nb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlU2VsZWN0aW9uTW9kYWwpO1xyXG5zZWxlY3Rpb25CdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG5cdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVQbGVkZ2VTZWxlY3Rpb24pO1xyXG59KTtcclxucGxlZGdlRm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG5cdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pdCk7XHJcbn0pO1xyXG5zdWNjZXNzTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlU3VjY2Vzc01vZGFsKTtcclxuXHJcbi8qIGluaXRpYWwgYWN0aW9ucyAqL1xyXG5sb2FkQm9va21hcmtEYXRhKCk7XHJcbmxvYWRQcm9ncmVzc0RhdGEoKTtcclxuaW5zZXJ0UHJvZ3Jlc3NEYXRhKCk7XHJcbiJdfQ==

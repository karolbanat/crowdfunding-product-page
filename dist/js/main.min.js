"use strict";var toggleBtn=document.querySelector(".toggle-button"),primaryNav=document.querySelector("#primary-nav"),bookmarkButton=document.querySelector(".bookmark-button"),totalAmountBacked=document.querySelector("#total-amount-backed"),totalBackers=document.querySelector("#total-backers"),progressBar=document.querySelector("#progress-bar"),pledgeButtons=document.querySelectorAll("button[data-reward]"),selectionModal=document.querySelector(".selection-modal"),closeSelectionModalButton=selectionModal.querySelector(".selection-modal__close-button"),selectionButtons=selectionModal.querySelectorAll('input[type="radio"][name="reward"]'),pledgeForms=selectionModal.querySelectorAll(".pledge-form"),successModal=document.querySelector(".success-modal"),successModalCloseButton=successModal.querySelector(".success-modal__confirmation-button"),TOTAL_AMOUNT=1e5,PROGRESS_DATA={amountBacked:89914,backers:5007},DATA_STATES={expanded:"data-expanded",bookmarked:"data-bookmarked",open:"data-open",selected:"data-selected"},handleToggleBtn=function(){toggleBtn.toggleAttribute(DATA_STATES.expanded);var e=toggleBtn.hasAttribute(DATA_STATES.expanded);primaryNav.toggleAttribute(DATA_STATES.expanded,e),toggleBtn.setAttribute("aria-expanded",e)},handleBookmarkButton=function(){bookmarkButton.toggleAttribute(DATA_STATES.bookmarked),saveBookmarkData()},saveBookmarkData=function(){var e=bookmarkButton.hasAttribute(DATA_STATES.bookmarked);localStorage.setItem("bookmarked",JSON.stringify(e))},loadBookmarkData=function(){var e=JSON.parse(localStorage.getItem("bookmarked"));bookmarkButton.toggleAttribute(DATA_STATES.bookmarked,e)},handlePledgeButton=function(e){openSelectionModal();e=e.target.dataset.reward;selectChosenPledge(e)},openSelectionModal=function(){selectionModal.setAttribute(DATA_STATES.open,!0)},selectChosenPledge=function(e){e='input[name="reward"][data-reward="'.concat(e,'"'),e=selectionModal.querySelector(e);e&&(unselectAllCards(),e.checked=!0,selectParentCard(e))},closeSelectionModal=function(){selectionModal.removeAttribute(DATA_STATES.open)},handlePledgeSelection=function(e){unselectAllCards(),selectParentCard(e.target)},unselectAllCards=function(){selectionButtons.forEach(function(e){return e.closest(".modal-pledge-card").removeAttribute(DATA_STATES.selected)})},selectParentCard=function(e){e=e.closest(".modal-pledge-card");e&&e.setAttribute(DATA_STATES.selected,!0)},handleFormSubmit=function(e){e.preventDefault();e=e.target.querySelector('input[type="number"]').value;updateProgressData(parseInt(e)),closeSelectionModal(),openSuccessModal()},updateProgressData=function(e){PROGRESS_DATA.amountBacked+=e,PROGRESS_DATA.backers+=1,saveProgressData(),updateProgressBar(),insertProgressData()},saveProgressData=function(){localStorage.setItem("progress",JSON.stringify(PROGRESS_DATA))},loadProgressData=function(){var e,t=JSON.parse(localStorage.getItem("progress"));t&&(e=t.amountBacked,t=t.backers,PROGRESS_DATA.amountBacked=e,PROGRESS_DATA.backers=t),insertProgressData()},insertProgressData=function(){totalAmountBacked.innerText=formatAmount(PROGRESS_DATA.amountBacked),totalBackers.innerText=PROGRESS_DATA.backers.toLocaleString("en-US"),updateProgressBar()},updateProgressBar=function(){var e=(PROGRESS_DATA.amountBacked/TOTAL_AMOUNT*100).toFixed(2);progressBar.style.setProperty("--progress","".concat(e,"%"))},formatAmount=function(e){return"$".concat(e.toLocaleString("en-US"))},openSuccessModal=function(){successModal.setAttribute(DATA_STATES.open,!0)},closeSuccessModal=function(){successModal.removeAttribute(DATA_STATES.open)};toggleBtn.addEventListener("click",handleToggleBtn),bookmarkButton.addEventListener("click",handleBookmarkButton),pledgeButtons.forEach(function(e){e.addEventListener("click",handlePledgeButton)}),closeSelectionModalButton.addEventListener("click",closeSelectionModal),selectionButtons.forEach(function(e){e.addEventListener("change",handlePledgeSelection)}),pledgeForms.forEach(function(e){e.addEventListener("submit",handleFormSubmit)}),successModalCloseButton.addEventListener("click",closeSuccessModal),loadBookmarkData(),loadProgressData(),insertProgressData();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJpbWFyeU5hdiIsImJvb2ttYXJrQnV0dG9uIiwidG90YWxCYWNrZXJzIiwicHJvZ3Jlc3NCYXIiLCJzZWxlY3Rpb25Nb2RhbCIsImNsb3NlU2VsZWN0aW9uTW9kYWxCdXR0b24iLCJzZWxlY3Rpb25CdXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsInN1Y2Nlc3NNb2RhbCIsInN1Y2Nlc3NNb2RhbENsb3NlQnV0dG9uIiwiVE9UQUxfQU1PVU5UIiwiUFJPR1JFU1NfREFUQSIsImFtb3VudEJhY2tlZCIsImJhY2tlcnMiLCJleHBhbmRlZCIsImJvb2ttYXJrZWQiLCJvcGVuIiwic2VsZWN0ZWQiLCJEQVRBX1NUQVRFUyIsImhhc0F0dHJpYnV0ZSIsInRvZ2dsZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInNhdmVCb29rbWFya0RhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiZ2V0SXRlbSIsImhhbmRsZVBsZWRnZUJ1dHRvbiIsImUiLCJvcGVuU2VsZWN0aW9uTW9kYWwiLCJsb2FkQm9va21hcmtEYXRhIiwiZGF0YXNldCIsInNlbGVjdENob3NlblBsZWRnZSIsInJld2FyZCIsInNlbGVjdGVkUGxlZGdlSW5wdXQiLCJxdWVyeSIsImNoZWNrZWQiLCJzZWxlY3RQYXJlbnRDYXJkIiwicmVtb3ZlQXR0cmlidXRlIiwidW5zZWxlY3RBbGxDYXJkcyIsInRhcmdldCIsImNsb3NlU2VsZWN0aW9uTW9kYWwiLCJidXR0b24iLCJlbGVtZW50IiwiaGFuZGxlUGxlZGdlU2VsZWN0aW9uIiwiaW5wdXRWYWx1ZSIsImNsb3Nlc3QiLCJ2YWx1ZSIsInVwZGF0ZVByb2dyZXNzRGF0YSIsInBhcnNlSW50Iiwib3BlblN1Y2Nlc3NNb2RhbCIsInNhdmVQcm9ncmVzc0RhdGEiLCJoYW5kbGVGb3JtU3VibWl0IiwidXBkYXRlUHJvZ3Jlc3NCYXIiLCJpbnNlcnRQcm9ncmVzc0RhdGEiLCJsb2FkUHJvZ3Jlc3NEYXRhIiwicHJvZ3Jlc3NEYXRhIiwidG90YWxBbW91bnRCYWNrZWQiLCJmb3JtYXRBbW91bnQiLCJpbm5lclRleHQiLCJ0b0xvY2FsZVN0cmluZyIsInRvRml4ZWQiLCJjb25jYXQiLCJwcm9ncmVzcyIsImFtb3VudCIsInNldFByb3BlcnR5IiwiaGFuZGxlVG9nZ2xlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUJvb2ttYXJrQnV0dG9uIiwicGxlZGdlQnV0dG9ucyIsImZvckVhY2giLCJwbGVkZ2VGb3JtcyIsImZvcm0iLCJjbG9zZVN1Y2Nlc3NNb2RhbCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBTUEsVUFBWUMsU0FBU0MsY0FBYyxnQkFBdkIsRUFEbEJDLFdBQUFGLFNBQUFDLGNBQUEsY0FBQSxFQUlBRSxlQUFBSCxTQUFBQyxjQUFBLGtCQUFBLEVBQ01FLGtCQUFpQkgsU0FBU0MsY0FBYyxzQkFBdkJELEVBQ3ZCSSxhQUFBSixTQUFBQyxjQUFBLGdCQUFBLEVBR01JLFlBQWNMLFNBQVNDLGNBQWMsZUFBdkIsRUFEZEcsY0FBZUosU0FBU0MsaUJBQWMscUJBQXZCRCxFQUVyQk0sZUFBQU4sU0FBQUMsY0FBQSxrQkFBQSxFQUlNTSwwQkFBNEJELGVBQWVMLGNBQWMsZ0NBQTdCLEVBRmxDTyxpQkFBQUYsZUFBQUcsaUJBQUEsb0NBQUEsRUFDTUgsWUFBY0EsZUFBWUwsaUJBQWMsY0FBMUIsRUFFcEJTLGFBQUFWLFNBQUFDLGNBQUEsZ0JBQUEsRUFNTVUsd0JBQTBCRCxhQUFhVCxjQUFjLHFDQUEzQixFQUpoQ1csYUFBQSxJQU9NQyxjQUFnQixDQU50QkMsYUFBaUIsTUFDakJDLFFBQUEsSUFLc0IsRUFKaEJMLFlBQWVWLENBQ3JCZ0IsU0FBTUwsZ0JBRU5NLFdBQU1MLGtCQUNOTSxLQUFNTCxZQVFMTSxTQVBBTCxlQUxvQmQsRUFTcEJnQixnQkFBVSxXQVFWakIsVUFQQWtCLGdCQUFZRyxZ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LEVBZUQsR0FBQSxDQUFBLENBQ0EsRUFkQ3RELGFBQWNFLFNBQUFBLEdBaUJmLE1BQUEsSUFBQW1ELE9BaEJDRSxFQUFBSixlQUFBLE9BQUEsQ0FnQkQsQ0FDQSxFQUdLVixpQkFBbUIsV0FoQnpCNUMsYUFBTWdELGFBQXFCdEMsWUFBckJzQyxLQUFBQSxDQUFBQSxDQUFOLENBa0JDLEVBZkFELGtCQUFpQixXQUhsQi9DLGFBQUFnQyxnQkFBQXRCLFlBQUFGLElBQUEsQ0FzQkMsRUFHRG5CLFVBakJDTSxpQkFBa0JnRSxRQUFZQyxlQWlCL0IsRUFoQkNuRSxlQUhEb0UsaUJBQUEsUUFBQUMsb0JBR0MsRUFrQkRDLGNBQWNDLFFBQVEsU0FBQzVCLEdBaEJ2QkEsRUFBTWdCLGlCQUFlLFFBQWZBLGtCQUFOLENBa0JDLENBRkQsRUFkQ3ZELDBCQUZEZ0UsaUJBQUEsUUFBQTFCLG1CQUVDLEVBRURyQyxpQkFBQWtFLFFBQUEsU0FBQTVCLEdBaUJDQSxFQUFPeUIsaUJBQWlCLFNBQVV2QixxQkFBbEMsQ0FDQSxDQWxCRCxFQUNBMkIsWUFBTXJCLFFBQWdCLFNBQUFzQixHQW1CckJBLEVBbEJBbEUsaUJBQWFhLFNBQWFILGdCQWtCMUIsQ0FuQkQsQ0FBQSxFQXFCQVQsd0JBQXdCNEQsaUJBQWlCLFFBQVNNLGlCQUFsRCxFQWZDM0MsaUJBRkQsRUFJQXlCLGlCQUFBLEVBa0JBRCxtQkFBa0IiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBuYXYgZWxlbWVudHMgKi9cclxuY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZ2dsZS1idXR0b24nKTtcclxuY29uc3QgcHJpbWFyeU5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmltYXJ5LW5hdicpO1xyXG5cclxuLyogYm9va21hcmsgKi9cclxuY29uc3QgYm9va21hcmtCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9va21hcmstYnV0dG9uJyk7XHJcbi8qIHByb2dyZXNzICovXHJcbmNvbnN0IHRvdGFsQW1vdW50QmFja2VkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvdGFsLWFtb3VudC1iYWNrZWQnKTtcclxuY29uc3QgdG90YWxCYWNrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvdGFsLWJhY2tlcnMnKTtcclxuY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZ3Jlc3MtYmFyJyk7XHJcbi8qIHBsZWRnZSBidXR0b25zIC0gYnV0dG9ucyBpbiBhYm91dCBzZWN0aW9uIGFuZCBoZWFkZXIgKi9cclxuY29uc3QgcGxlZGdlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltkYXRhLXJld2FyZF0nKTtcclxuLyogc2VsZWN0aW9uIG1vZGFsICovXHJcbmNvbnN0IHNlbGVjdGlvbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGlvbi1tb2RhbCcpO1xyXG5jb25zdCBjbG9zZVNlbGVjdGlvbk1vZGFsQnV0dG9uID0gc2VsZWN0aW9uTW9kYWwucXVlcnlTZWxlY3RvcignLnNlbGVjdGlvbi1tb2RhbF9fY2xvc2UtYnV0dG9uJyk7XHJcbi8qIHBsZWRnZSBzZWxlY3QgcmFkaW8gYnV0dG9ucyAqL1xyXG5jb25zdCBzZWxlY3Rpb25CdXR0b25zID0gc2VsZWN0aW9uTW9kYWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCJyZXdhcmRcIl0nKTtcclxuLyogZm9ybXMgKi9cclxuY29uc3QgcGxlZGdlRm9ybXMgPSBzZWxlY3Rpb25Nb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcucGxlZGdlLWZvcm0nKTtcclxuLyogc3VjY2VzcyBtb2RhbCAqL1xyXG5jb25zdCBzdWNjZXNzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VjY2Vzcy1tb2RhbCcpO1xyXG5jb25zdCBzdWNjZXNzTW9kYWxDbG9zZUJ1dHRvbiA9IHN1Y2Nlc3NNb2RhbC5xdWVyeVNlbGVjdG9yKCcuc3VjY2Vzcy1tb2RhbF9fY29uZmlybWF0aW9uLWJ1dHRvbicpO1xyXG5cclxuY29uc3QgVE9UQUxfQU1PVU5UID0gMTAwMDAwO1xyXG5jb25zdCBQUk9HUkVTU19EQVRBID0ge1xyXG5cdGFtb3VudEJhY2tlZDogODk5MTQsXHJcblx0YmFja2VyczogNTAwNyxcclxufTtcclxuY29uc3QgREFUQV9TVEFURVMgPSB7XHJcblx0ZXhwYW5kZWQ6ICdkYXRhLWV4cGFuZGVkJyxcclxuXHRib29rbWFya2VkOiAnZGF0YS1ib29rbWFya2VkJyxcclxuXHRvcGVuOiAnZGF0YS1vcGVuJyxcclxuXHRzZWxlY3RlZDogJ2RhdGEtc2VsZWN0ZWQnLFxyXG59O1xyXG5cclxuLyogdG9nZ2xlIG5hdiBidXR0b24gaGFuZGxpbmcgKi9cclxuY29uc3QgaGFuZGxlVG9nZ2xlQnRuID0gKCkgPT4ge1xyXG5cdHRvZ2dsZUJ0bi50b2dnbGVBdHRyaWJ1dGUoREFUQV9TVEFURVMuZXhwYW5kZWQpO1xyXG5cdGNvbnN0IGV4cGFuZGVkID0gdG9nZ2xlQnRuLmhhc0F0dHJpYnV0ZShEQVRBX1NUQVRFUy5leHBhbmRlZCk7XHJcblx0cHJpbWFyeU5hdi50b2dnbGVBdHRyaWJ1dGUoREFUQV9TVEFURVMuZXhwYW5kZWQsIGV4cGFuZGVkKTtcclxuXHR0b2dnbGVCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgZXhwYW5kZWQpO1xyXG59O1xyXG5cclxuLyogYm9va21hcmsgaGFuZGxpbmcgKi9cclxuY29uc3QgaGFuZGxlQm9va21hcmtCdXR0b24gPSAoKSA9PiB7XHJcblx0Ym9va21hcmtCdXR0b24udG9nZ2xlQXR0cmlidXRlKERBVEFfU1RBVEVTLmJvb2ttYXJrZWQpO1xyXG5cdHNhdmVCb29rbWFya0RhdGEoKTtcclxufTtcclxuXHJcbmNvbnN0IHNhdmVCb29rbWFya0RhdGEgPSAoKSA9PiB7XHJcblx0Y29uc3QgYm9va21hcmtlZCA9IGJvb2ttYXJrQnV0dG9uLmhhc0F0dHJpYnV0ZShEQVRBX1NUQVRFUy5ib29rbWFya2VkKTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYm9va21hcmtlZCcsIEpTT04uc3RyaW5naWZ5KGJvb2ttYXJrZWQpKTtcclxufTtcclxuXHJcbmNvbnN0IGxvYWRCb29rbWFya0RhdGEgPSAoKSA9PiB7XHJcblx0Y29uc3QgYm9va21hcmtlZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jvb2ttYXJrZWQnKSk7XHJcblx0Ym9va21hcmtCdXR0b24udG9nZ2xlQXR0cmlidXRlKERBVEFfU1RBVEVTLmJvb2ttYXJrZWQsIGJvb2ttYXJrZWQpO1xyXG59O1xyXG5cclxuLyogcGxlZGdlIGJ1dHRvbiBoYW5kbGluZyAqL1xyXG5jb25zdCBoYW5kbGVQbGVkZ2VCdXR0b24gPSAoZSkgPT4ge1xyXG5cdG9wZW5TZWxlY3Rpb25Nb2RhbCgpO1xyXG5cdGNvbnN0IHJld2FyZCA9IGUudGFyZ2V0LmRhdGFzZXQucmV3YXJkO1xyXG5cdHNlbGVjdENob3NlblBsZWRnZShyZXdhcmQpO1xyXG59O1xyXG5cclxuY29uc3Qgb3BlblNlbGVjdGlvbk1vZGFsID0gKCkgPT4ge1xyXG5cdHNlbGVjdGlvbk1vZGFsLnNldEF0dHJpYnV0ZShEQVRBX1NUQVRFUy5vcGVuLCB0cnVlKTtcclxufTtcclxuXHJcbmNvbnN0IHNlbGVjdENob3NlblBsZWRnZSA9IChyZXdhcmQpID0+IHtcclxuXHQvKiBmaW5kIGlucHV0IHdpdGggY2hvc2VuIHJld2FyZCAqL1xyXG5cdGNvbnN0IHF1ZXJ5ID0gYGlucHV0W25hbWU9XCJyZXdhcmRcIl1bZGF0YS1yZXdhcmQ9XCIke3Jld2FyZH1cImA7XHJcblx0Y29uc3Qgc2VsZWN0ZWRQbGVkZ2VJbnB1dCA9IHNlbGVjdGlvbk1vZGFsLnF1ZXJ5U2VsZWN0b3IocXVlcnkpO1xyXG5cdC8qIGlmIGZvdW5kIHNlbGVjdCBpdCBhbmQgcGFyZW50IGNhcmQgKi9cclxuXHRpZiAoc2VsZWN0ZWRQbGVkZ2VJbnB1dCkge1xyXG5cdFx0dW5zZWxlY3RBbGxDYXJkcygpO1xyXG5cdFx0c2VsZWN0ZWRQbGVkZ2VJbnB1dC5jaGVja2VkID0gdHJ1ZTtcclxuXHRcdHNlbGVjdFBhcmVudENhcmQoc2VsZWN0ZWRQbGVkZ2VJbnB1dCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2xvc2VTZWxlY3Rpb25Nb2RhbCA9ICgpID0+IHtcclxuXHRzZWxlY3Rpb25Nb2RhbC5yZW1vdmVBdHRyaWJ1dGUoREFUQV9TVEFURVMub3Blbik7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVQbGVkZ2VTZWxlY3Rpb24gPSAoZSkgPT4ge1xyXG5cdHVuc2VsZWN0QWxsQ2FyZHMoKTtcclxuXHRzZWxlY3RQYXJlbnRDYXJkKGUudGFyZ2V0KTtcclxufTtcclxuXHJcbmNvbnN0IHVuc2VsZWN0QWxsQ2FyZHMgPSAoKSA9PiB7XHJcblx0c2VsZWN0aW9uQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IGJ1dHRvbi5jbG9zZXN0KCcubW9kYWwtcGxlZGdlLWNhcmQnKS5yZW1vdmVBdHRyaWJ1dGUoREFUQV9TVEFURVMuc2VsZWN0ZWQpKTtcclxufTtcclxuXHJcbmNvbnN0IHNlbGVjdFBhcmVudENhcmQgPSAoZWxlbWVudCkgPT4ge1xyXG5cdGNvbnN0IHBhcmVudCA9IGVsZW1lbnQuY2xvc2VzdCgnLm1vZGFsLXBsZWRnZS1jYXJkJyk7XHJcblx0aWYgKHBhcmVudCkgcGFyZW50LnNldEF0dHJpYnV0ZShEQVRBX1NUQVRFUy5zZWxlY3RlZCwgdHJ1ZSk7XHJcbn07XHJcblxyXG4vKiBmb3JtIHN1Ym1pdHNzaW9uICovXHJcbmNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjb25zdCBmb3JtSW5wdXQgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwibnVtYmVyXCJdJyk7XHJcblx0Y29uc3QgaW5wdXRWYWx1ZSA9IGZvcm1JbnB1dC52YWx1ZTtcclxuXHR1cGRhdGVQcm9ncmVzc0RhdGEocGFyc2VJbnQoaW5wdXRWYWx1ZSkpO1xyXG5cdGNsb3NlU2VsZWN0aW9uTW9kYWwoKTtcclxuXHRvcGVuU3VjY2Vzc01vZGFsKCk7XHJcbn07XHJcblxyXG4vKiBwcm9ncmVzcyBoYW5kbGluZyAqL1xyXG5jb25zdCB1cGRhdGVQcm9ncmVzc0RhdGEgPSAodmFsdWUpID0+IHtcclxuXHRQUk9HUkVTU19EQVRBLmFtb3VudEJhY2tlZCArPSB2YWx1ZTtcclxuXHRQUk9HUkVTU19EQVRBLmJhY2tlcnMgKz0gMTtcclxuXHRzYXZlUHJvZ3Jlc3NEYXRhKCk7XHJcblx0dXBkYXRlUHJvZ3Jlc3NCYXIoKTtcclxuXHRpbnNlcnRQcm9ncmVzc0RhdGEoKTtcclxufTtcclxuXHJcbmNvbnN0IHNhdmVQcm9ncmVzc0RhdGEgPSAoKSA9PiB7XHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2dyZXNzJywgSlNPTi5zdHJpbmdpZnkoUFJPR1JFU1NfREFUQSkpO1xyXG59O1xyXG5cclxuY29uc3QgbG9hZFByb2dyZXNzRGF0YSA9ICgpID0+IHtcclxuXHRjb25zdCBwcm9ncmVzc0RhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ncmVzcycpKTtcclxuXHRpZiAocHJvZ3Jlc3NEYXRhKSB7XHJcblx0XHRjb25zdCB7IGFtb3VudEJhY2tlZCwgYmFja2VycyB9ID0gcHJvZ3Jlc3NEYXRhO1xyXG5cdFx0UFJPR1JFU1NfREFUQS5hbW91bnRCYWNrZWQgPSBhbW91bnRCYWNrZWQ7XHJcblx0XHRQUk9HUkVTU19EQVRBLmJhY2tlcnMgPSBiYWNrZXJzO1xyXG5cdH1cclxuXHRpbnNlcnRQcm9ncmVzc0RhdGEoKTtcclxufTtcclxuXHJcbmNvbnN0IGluc2VydFByb2dyZXNzRGF0YSA9ICgpID0+IHtcclxuXHR0b3RhbEFtb3VudEJhY2tlZC5pbm5lclRleHQgPSBmb3JtYXRBbW91bnQoUFJPR1JFU1NfREFUQS5hbW91bnRCYWNrZWQpO1xyXG5cdHRvdGFsQmFja2Vycy5pbm5lclRleHQgPSBQUk9HUkVTU19EQVRBLmJhY2tlcnMudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJyk7XHJcblx0dXBkYXRlUHJvZ3Jlc3NCYXIoKTtcclxufTtcclxuXHJcbmNvbnN0IHVwZGF0ZVByb2dyZXNzQmFyID0gKCkgPT4ge1xyXG5cdGNvbnN0IHByb2dyZXNzID0gKChQUk9HUkVTU19EQVRBLmFtb3VudEJhY2tlZCAvIFRPVEFMX0FNT1VOVCkgKiAxMDApLnRvRml4ZWQoMik7XHJcblx0cHJvZ3Jlc3NCYXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tcHJvZ3Jlc3MnLCBgJHtwcm9ncmVzc30lYCk7XHJcbn07XHJcblxyXG5jb25zdCBmb3JtYXRBbW91bnQgPSAoYW1vdW50KSA9PiB7XHJcblx0cmV0dXJuIGAkJHthbW91bnQudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJyl9YDtcclxufTtcclxuXHJcbi8qIHN1Y2Nlc3MgbW9kYWwgaGFuZGxpbmcgKi9cclxuY29uc3Qgb3BlblN1Y2Nlc3NNb2RhbCA9ICgpID0+IHtcclxuXHRzdWNjZXNzTW9kYWwuc2V0QXR0cmlidXRlKERBVEFfU1RBVEVTLm9wZW4sIHRydWUpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VTdWNjZXNzTW9kYWwgPSAoKSA9PiB7XHJcblx0c3VjY2Vzc01vZGFsLnJlbW92ZUF0dHJpYnV0ZShEQVRBX1NUQVRFUy5vcGVuKTtcclxufTtcclxuXHJcbi8qIGV2ZW50IGxpc3RlbmVycyAqL1xyXG50b2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVUb2dnbGVCdG4pO1xyXG5ib29rbWFya0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUJvb2ttYXJrQnV0dG9uKTtcclxucGxlZGdlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcclxuXHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQbGVkZ2VCdXR0b24pO1xyXG59KTtcclxuY2xvc2VTZWxlY3Rpb25Nb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlU2VsZWN0aW9uTW9kYWwpO1xyXG5zZWxlY3Rpb25CdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG5cdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVQbGVkZ2VTZWxlY3Rpb24pO1xyXG59KTtcclxucGxlZGdlRm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG5cdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pdCk7XHJcbn0pO1xyXG5zdWNjZXNzTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlU3VjY2Vzc01vZGFsKTtcclxuXHJcbi8qIGluaXRpYWwgYWN0aW9ucyAqL1xyXG5sb2FkQm9va21hcmtEYXRhKCk7XHJcbmxvYWRQcm9ncmVzc0RhdGEoKTtcclxuaW5zZXJ0UHJvZ3Jlc3NEYXRhKCk7XHJcbiJdfQ==
